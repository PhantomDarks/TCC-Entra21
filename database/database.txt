
-- TEST SELECT
select * from pessoa p;
select * from funcionario f ;
select * from empresa e;
select * from carro c;
select * from trecho t;
select * from entrega e;
select * from entrega_trecho et;
select * from item i;
select * from entrega_item ei;


-- TEST INSERT
insert into pessoa (nome, sobrenome, telefone, cpf, login, senha)
values
	('userName', 'lastName', '4799999999X','9999999999X', 'userLogin', 'userhardestPassword'),
	('userName2', 'lastName2', '4799999999Y','9999999999Y', 'userLogin2', 'userhardestPassword2'),
	('userName3', 'lastName3', '4799999999Z','9999999999Z', 'userLogin3', 'userhardestPassword3');

insert into empresa (razao_social, id_gerente)
values
	('viver', 1),
	('viver tambem', 3);
	
insert into funcionario (id_pessoa, id_supervisor, id_empresa)
values 
	(1, 3, 1),
	(2, 3, 1),
	(3, 2, 2);

insert into carro (tipo, id_empresa)
values
	('CAMINHAO', 1),
	('VAN', 1),
	('CAMINHAO', 2);

insert into trecho (local_inicio, local_fim)
values
	('SC-Blumenau-Rua Bahia, 25', 'SC-Blumenau-Rua Paris, 136'),
	('SC-Blumenau-Rua Bahia, 01', 'SC-Blumenau-Rua Paris, 300'),
	('SC-Blumenau-Rua Bahia, 03', 'SC-Blumenau-Rua Paris, 300');

insert into entrega (id_entregador, tipo_entrega)
values
	(1, 'expressa'),
	(1, 'economica'),
	(2, 'economica');

insert into entrega_trecho (id_entrega, id_trecho, id_carro, completo, data_inicio, data_fim)
values
	(1, 1, 1, 0, '1998-01-23 12:45:56', null),
	(2, 2, 1, 0, '1998-01-23 12:45:56', null),
	(3, 3, 2, 1, '1998-01-23 12:45:56', '1998-01-23 12:45:57');

insert into item (localizador, status, local_entrega, nome_recebedor, id_pessoa)
values
	('ASD1234', 'saiu para entrega', 'SC-Blumenau-Rua Paris, 136', 'Feleipa', null),
	('ASD123X', 'saiu para entrega', 'SC-Blumenau-Rua Paris, 300', 'Maira', null),
	('ASD123Z', 'saiu para entrega', 'SC-Blumenau-Rua Paris, 300', 'Pedrionh', 3);

insert into entrega_item (id_entrega, id_item)
values
	(1,1),
	(2,2),
	(3,3);


-- TCC ENTRA21 BANCO DE DADOS
drop database TCC;
create database TCC;
use TCC;

create table pessoa(
id bigint not null primary key auto_increment,
nome varchar(50) not null,
sobrenome varchar(50) not null,
telefone varchar(50) not null,
cpf char(11) not null,
login varchar(100) not null,
senha varchar(50) not null,
unique(cpf, login)
);

create table empresa(
id bigint not null primary key auto_increment,
razao_social varchar(250),
id_gerente bigint not null,
foreign key (id_gerente) references pessoa(id)
);

create table funcionario(
id bigint not null primary key auto_increment,
id_pessoa bigint not null,
id_supervisor bigint not null,
id_empresa bigint not null,
foreign key (id_pessoa) references pessoa(id),
foreign key (id_supervisor) references pessoa(id),
foreign key (id_empresa) references empresa(id)
);

create table carro(
id bigint not null primary key auto_increment,
tipo varchar(45) not null,
id_empresa bigint not null,
foreign key (id_empresa) references empresa(id)
);

create table trecho (
id bigint not null primary key auto_increment,
local_inicio varchar(250) not null,
local_fim varchar(250) not null
);

create table entrega (
id bigint not null primary key auto_increment,
id_entregador bigint not null,
tipo_entrega varchar(45) not null,
foreign key (id_entregador) references funcionario(id)
);

create table entrega_trecho (
id bigint not null primary key auto_increment,
id_entrega bigint not null,
id_trecho bigint not null,
id_carro bigint not null,
completo bit(1) default(0),
data_inicio datetime,
data_fim datetime,
foreign key (id_carro) references carro(id),
foreign key (id_entrega) references entrega(id),
foreign key (id_trecho) references trecho(id)
);

create table item(
id bigint not null auto_increment primary key,
localizador varchar(100) not null,
status varchar(50) default('Em espera'),
local_entrega varchar(300) not null,
nome_recebedor varchar(50) not null,
id_pessoa bigint,
foreign key (id_pessoa) references pessoa(id),
unique(localizador)
);

create table entrega_item(
id_entrega bigint not null,
id_item bigint not null,
foreign key (id_entrega) references entrega(id),
foreign key (id_item) references item(id),
primary key(id_entrega, id_item)
);



-- disable table
-- create table carro_emrpesa(
-- id_carro bigint not null,
-- id_empresa bigint not null,
-- foreign key (id_carro) references carro(id),
-- foreign key (id_empresa) references emrpesa(id),
-- primary key(id_carro, id_emrpesa)
-- )
